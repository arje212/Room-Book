{% extends "booking/base.html" %}
{% load widget_tweaks %}
{% load static %}
{% block title %}Register{% endblock %}
{% block content %}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@500&display=swap" rel="stylesheet">

<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg:      #f8fafc;
    --surface: #ffffff;
    --surface2:#f1f5f9;
    --surface3:#e8edf5;
    --border:  #e2e8f0;
    --accent:  #4f46e5;
    --accent2: #ef4444;
    --accent3: #10b981;
    --text:    #0f172a;
    --muted:   #64748b;
    --dim:     #94a3b8;
  }

  body {
    font-family: 'DM Sans', sans-serif !important;
    background: var(--bg) !important;
    color: var(--text) !important;
    min-height: 100vh !important;
  }

  .register-page {
    min-height: 100vh; display:flex;
    position:relative; overflow:hidden;
  }

  .bg-dots {
    position:fixed; inset:0;
    background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
    background-size: 28px 28px;
    pointer-events:none; z-index:0; opacity:.5;
  }
  .orb { position:fixed; border-radius:50%; filter:blur(90px); pointer-events:none; z-index:0; }
  .orb-1 { width:500px; height:500px; background:rgba(79,70,229,0.07); top:-120px; left:-80px; animation:drift1 13s ease-in-out infinite alternate; }
  .orb-2 { width:380px; height:380px; background:rgba(16,185,129,0.06); bottom:-80px; right:-60px; animation:drift2 11s ease-in-out infinite alternate; }
  @keyframes drift1 { to { transform:translate(50px,70px); } }
  @keyframes drift2 { to { transform:translate(-40px,-50px); } }

  .top-nav { position:fixed; top:20px; right:28px; z-index:10; display:flex; align-items:center; gap:14px; }
  .top-nav a { font-size:13px; color:var(--muted); text-decoration:none; transition:.15s; }
  .top-nav a:hover { color:var(--accent); }
  .top-nav .nav-pill { padding:7px 16px; border:1.5px solid var(--border); border-radius:8px; background:var(--surface); color:var(--accent); font-weight:600; }
  .top-nav .nav-pill:hover { background:var(--accent); color:white; border-color:var(--accent); }

  /* LEFT */
  .left-panel { position:relative; z-index:1; width:42%; display:flex; flex-direction:column; justify-content:center; padding:60px 50px; }
  @media(max-width:960px){ .left-panel { display:none; } }

  .brand { display:flex; align-items:center; gap:10px; font-size:17px; font-weight:700; color:var(--text); margin-bottom:60px; }
  .brand-dot { width:10px; height:10px; background:var(--accent3); border-radius:50%; box-shadow:0 0 0 3px rgba(16,185,129,.2); animation:pulse 2.5s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{box-shadow:0 0 0 3px rgba(16,185,129,.2)} 50%{box-shadow:0 0 0 7px rgba(16,185,129,.06)} }

  .hero-label { font-size:11px; text-transform:uppercase; letter-spacing:2px; color:var(--accent3); margin-bottom:14px; font-weight:600; }
  .hero-title { font-size:40px; font-weight:700; line-height:1.1; letter-spacing:-1.2px; color:var(--text); margin-bottom:16px; }
  .hero-title span { color:var(--accent); }
  .hero-sub { font-size:14px; color:var(--muted); line-height:1.75; max-width:340px; margin-bottom:40px; }

  .steps { display:flex; flex-direction:column; gap:0; }
  .step { display:flex; gap:16px; align-items:flex-start; padding:16px 0; border-bottom:1.5px solid var(--border); }
  .step:last-child { border-bottom:none; }
  .step-num { width:30px; height:30px; background:var(--surface2); border:1.5px solid var(--border); border-radius:8px; display:flex; align-items:center; justify-content:center; font-family:'DM Mono',monospace; font-size:12px; color:var(--accent); flex-shrink:0; margin-top:1px; }
  .step-title { font-size:13px; font-weight:600; color:var(--text); margin-bottom:3px; }
  .step-desc  { font-size:12px; color:var(--muted); }

  /* RIGHT */
  .right-panel { position:relative; z-index:1; flex:1; display:flex; align-items:center; justify-content:center; padding:80px 32px 40px; overflow-y:auto; }

  .register-card {
    width:100%; max-width:480px;
    background:var(--surface); border:1.5px solid var(--border);
    border-radius:20px; padding:36px;
    box-shadow:0 8px 40px rgba(0,0,0,0.08);
    animation:cardIn .35s ease;
  }
  @keyframes cardIn { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }

  .card-title { font-size:21px; font-weight:700; color:var(--text); letter-spacing:-.3px; margin-bottom:4px; }
  .card-sub { font-size:13px; color:var(--muted); margin-bottom:24px; }

  .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
  .form-group { display:flex; flex-direction:column; gap:6px; }
  .form-group.full { grid-column:1/-1; }

  .form-label { font-size:11px; font-weight:600; color:var(--muted); text-transform:uppercase; letter-spacing:.8px; }

  .form-group input,
  .form-group select,
  .form-group textarea {
    background: var(--surface2) !important;
    border: 1.5px solid var(--border) !important;
    border-radius: 10px !important;
    padding: 11px 13px !important;
    font-size: 13px !important;
    font-family: 'DM Sans', sans-serif !important;
    color: var(--text) !important;
    outline: none !important;
    transition: .2s !important;
    width: 100% !important;
    -webkit-appearance: none;
  }
  .form-group input[type="color"] { padding:6px 8px !important; height:42px !important; cursor:pointer !important; }
  .form-group input:focus,
  .form-group select:focus { border-color:var(--accent) !important; box-shadow:0 0 0 3px rgba(79,70,229,.1) !important; background:white !important; }

  .field-error { font-size:11px; color:var(--accent2); }
  .non-field-errors { background:#fef2f2; border:1.5px solid #fecaca; color:#ef4444; border-radius:8px; padding:10px 14px; font-size:12px; margin-bottom:18px; }
  .hint { font-size:11px; color:var(--dim); }

  .btn-register {
    width:100%; padding:13px;
    background:var(--accent); color:white; border:none;
    border-radius:10px; font-size:14px; font-weight:700;
    font-family:'DM Sans',sans-serif; cursor:pointer; transition:.2s; margin-top:20px;
  }
  .btn-register:hover { background:#4338ca; box-shadow:0 8px 24px rgba(79,70,229,.25); transform:translateY(-1px); }
  .btn-register:active { transform:translateY(0); }

  .login-link { text-align:center; margin-top:16px; font-size:13px; color:var(--muted); }
  .login-link a { color:var(--accent); text-decoration:none; font-weight:600; }
  .login-link a:hover { text-decoration:underline; }
</style>

<div class="top-nav">
  <a href="{% url 'custom_reset_password' %}">Help</a>
  <a href="{% url 'login' %}" class="nav-pill">Sign in â†’</a>
</div>

<div class="register-page">
  <div class="bg-dots"></div>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>

  <!-- LEFT -->
  <div class="left-panel">
    <div class="brand"><div class="brand-dot"></div> Training Rooms</div>
    <div class="hero-label">Get Started</div>
    <h1 class="hero-title">Create your<br><span>account.</span></h1>
    <p class="hero-sub">Join in seconds. Once you're in, start booking rooms, managing schedules, and collaborating with your team.</p>
    <div class="steps">
      <div class="step"><div class="step-num">01</div><div><div class="step-title">Fill in your details</div><div class="step-desc">Username, email, and a secure password</div></div></div>
      <div class="step"><div class="step-num">02</div><div><div class="step-title">Choose your color</div><div class="step-desc">Your bookings will appear in this color on the calendar</div></div></div>
      <div class="step"><div class="step-num">03</div><div><div class="step-title">Start booking</div><div class="step-desc">Reserve rooms instantly and manage your schedule</div></div></div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right-panel">
    <div class="register-card">
      <div class="card-title">Create account ðŸš€</div>
      <div class="card-sub">Fill in the details below to get started</div>

      {% if form.non_field_errors %}
        <div class="non-field-errors">{% for e in form.non_field_errors %}{{ e }}{% endfor %}</div>
      {% endif %}

      <form method="post">
        {% csrf_token %}
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Username</label>
            {{ form.username|add_class:"" }}
            {% for e in form.username.errors %}<div class="field-error">{{ e }}</div>{% endfor %}
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            {{ form.email|add_class:"" }}
            {% for e in form.email.errors %}<div class="field-error">{{ e }}</div>{% endfor %}
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            {{ form.password1|add_class:"" }}
            {% for e in form.password1.errors %}<div class="field-error">{{ e }}</div>{% endfor %}
            <div class="hint">Min. 8 characters</div>
          </div>
          <div class="form-group">
            <label class="form-label">Confirm Password</label>
            {{ form.password2|add_class:"" }}
            {% for e in form.password2.errors %}<div class="field-error">{{ e }}</div>{% endfor %}
          </div>
          <div class="form-group full">
            <label class="form-label">Your Booking Color</label>
            {{ form.color|add_class:"" }}
            {% for e in form.color.errors %}<div class="field-error">{{ e }}</div>{% endfor %}
            <div class="hint">This color will represent your bookings on the shared calendar</div>
          </div>
        </div>
        <button type="submit" class="btn-register">Create Account â†’</button>
      </form>

      <div class="login-link">Already have an account? <a href="{% url 'login' %}">Sign in</a></div>
    </div>
  </div>
</div>

{% endblock %}
